local_backend: true

# ========================================
# DECAP CMS - CONFIGURAÇÃO
# ========================================
# EDITORIAL WORKFLOW:
# O Decap CMS gerencia o status de publicação através de 3 estados:
# 1. Draft (Rascunho) - Artigo em construção
# 2. In Review (Em Revisão) - Pronto para revisão
# 3. Ready (Pronto) - Aprovado para publicação
# Os campos 'published', 'featured' e 'draft' estão ocultos
# e serão gerenciados automaticamente pelo workflow ou scripts.
# ========================================

# Backend Git Gateway com Netlify Identity
backend:
  name: git-gateway
  branch: news
  repo: czargab18/newshub
  api_root: https://api.github.com
  base_url: https://seu-oauth-server.com
  auth_endpoint: auth
  site_domain: czargab18.github.io
  cms_label_prefix: decap-cms/
  commit_messages:
    create: Create {{collection}} “{{slug}}”
    update: Update {{collection}} “{{slug}}”
    delete: Delete {{collection}} “{{slug}}”
    uploadMedia: Upload “{{path}}”
    deleteMedia: Delete “{{path}}”
    openAuthoring: '{{message}}'

# Configurações de autenticação
# O Netlify Identity gerencia automaticamente a autenticação
# base_url e auth_endpoint são desnecessários com git-gateway padrão

publish_mode: editorial_workflow
media_folder: "article/uploads"
public_folder: "uploads"
show_preview_links: true
search: true
slug:
  encoding: "ascii"
  clean_accents: true
  sanitize_replacement: "_"


editor:
  preview: true
  preview_path: "article/{{slug}}"



collections:
  - name: "conteudo"
    label: "Conteúdo"
    label_singular: "Artigo"
    description: "Gerenciamento de artigos, notícias e conteúdos do site"
    folder: "article"
    create: true
    slug: "{{slug}}"
    summary: "{{title}} - {{type}} - {{date_format}}"
    extension: "json"
    format: "json"
    
    preview_path: "article/{{slug}}"
    sortable_fields: ['date_format', 'title', 'type']
    
    view_filters:
      - label: "Notícias"
        field: type
        pattern: "news"
      - label: "Artigos"
        field: type
        pattern: "article"
      - label: "Eventos"
        field: type
        pattern: "event"
      - label: "Português"
        field: language
        pattern: "pt-BR"
    
    view_groups:
      - label: "Tipo"
        field: type
      - label: "Categoria"
        field: category
      - label: "Idioma"
        field: language
    
    fields:
      # --- CAMPOS OCULTOS (Preenchidos por script) ---
      - { label: "ID", name: "id", widget: "hidden", default: "" }
      - { label: "Ano", name: "ano", widget: "hidden", default: "" }
      - { label: "Mês", name: "month", widget: "hidden", default: "" }
      - { label: "Slug", name: "slug", widget: "hidden", default: "" }
      
      # --- CAMPOS OCULTOS (Informações de autor automáticas) ---
      - { label: "Autor", name: "author", widget: "hidden", default: "" }
      - { label: "Bio do Autor", name: "author_bio", widget: "hidden", default: "" }
      - { label: "Avatar do Autor", name: "author_avatar", widget: "hidden", default: "" }
      
      # --- CAMPOS OCULTOS (Status gerenciados pelo Editorial Workflow) ---
      - { label: "Publicado", name: "published", widget: "hidden", default: false }
      - { label: "Em Destaque", name: "featured", widget: "hidden", default: false }
      - { label: "Rascunho", name: "draft", widget: "hidden", default: true }
      
      # --- CAMPOS OCULTOS (Thumbnail não necessária) ---
      - label: "Miniatura"
        name: "thumbnail"
        widget: "hidden"
        default:
          url: ""
          alt: ""
          width: 600
          height: 400
          caption: ""
      
      # --- DATAS ---
      - label: "Data de Publicação"
        name: "date_format"
        widget: "datetime"
        default: "{{now}}"
        date_format: "DD [de] MMMM [de] YYYY"
        time_format: false
        format: "YYYY-MM-DDTHH:mm:ss.SSSZ"
        hint: "Selecione a data de publicação"
        required: true
      - label: "Data de Atualização"
        name: "date_updated"
        widget: "datetime"
        default: ""
        date_format: "DD [de] MMMM [de] YYYY"
        time_format: false
        format: "YYYY-MM-DDTHH:mm:ss.SSSZ"
        required: false
        optional: true
      
      # --- CONTEÚDO PRINCIPAL ---
      - label: "Título"
        name: "title"
        widget: "string"
        required: true
        hint: "Título principal do artigo"
      - label: "Subtítulo"
        name: "subtitle"
        widget: "string"
        default: ""
        required: false
        optional: true
        hint: "Subtítulo opcional para complementar o título"
      - label: "Excerto (Resumo curto)"
        name: "excerpt"
        widget: "text"
        default: ""
        required: false
        optional: true
        hint: "120-160 caracteres. Usado em listagens e meta description para SEO"
      - label: "Sumário (Resumo detalhado)"
        name: "summary"
        widget: "text"
        default: ""
        required: false
        optional: true
        hint: "200-300 caracteres. Resumo mais detalhado do conteúdo"
      
      # --- CATEGORIZAÇÃO ---
      - label: "Contribuidores"
        name: "contributors"
        widget: "list"
        default: []
        optional: true
        collapsed: true
        fields:
          - { label: "Nome", name: "name", widget: "string", default: "" }
          - { label: "Função", name: "role", widget: "select", default: "Co-autor", options: ["Editor", "Revisor Técnico", "Co-autor", "Pesquisador", "Designer Gráfico", "Fotógrafo", "Tradutor", "Consultor"] }
          - { label: "Email", name: "email", widget: "string", default: "", optional: true }
      
      - label: "Tipo"
        name: "type"
        widget: "select"
        default: "news"
        required: true
        options:
          - { label: "Notícia", value: "news" }
          - { label: "Artigo", value: "article" }
          - { label: "Evento", value: "event" }
          - { label: "Press Release", value: "press" }
          - { label: "Análise", value: "analysis" }
          - { label: "Relatório", value: "report" }
        hint: "Tipo de conteúdo sendo publicado"
      
      - label: "Categoria"
        name: "category"
        widget: "select"
        multiple: true
        default: []
        required: false
        options:
          - { label: "Leitura Rápida", value: "QUICK READ" }
          - { label: "Declaração Oficial", value: "EST STATEMENT" }
          - { label: "Fotos", value: "PHOTOS" }
          - { label: "Comunicado à Imprensa", value: "PRESS RELEASE" }
          - { label: "Lançamento", value: "RELEASE" }
          - { label: "Atualização", value: "UPDATE" }
        hint: "Selecione uma ou mais categorias"
      
      - { label: "Subcategoria", name: "subcategory", widget: "string", default: "", optional: true, hint: "Ex: Demografia, Economia" }
      - { label: "Tags (Busca Interna)", name: "tags", widget: "list", default: [], optional: true }
      - { label: "Palavras-chave (SEO)", name: "keywords", widget: "list", default: [], optional: true }
      - { label: "Idioma", name: "language", widget: "select", default: "pt-BR", options: ["pt-BR", "en-US", "es-ES"] }
      
      # --- IMAGENS E MÍDIA ---
      - label: "Imagem de Capa (Cover)"
        name: "cover_image"
        widget: "object"
        optional: true
        collapsed: true
        fields:
          - { label: "URL", name: "url", widget: "image", default: "" }
          - { label: "Texto Alternativo (Alt)", name: "alt", widget: "string", default: "" }
          - { label: "Largura", name: "width", widget: "number", default: 1920 }
          - { label: "Altura", name: "height", widget: "number", default: 1080 }
          - { label: "Legenda", name: "caption", widget: "string", default: "", optional: true }
          - { label: "Crédito (Foto)", name: "credit", widget: "string", default: "", optional: true }
      
      - label: "Galeria de Imagens"
        name: "images"
        widget: "list"
        default: []
        optional: true
        collapsed: true
        fields:
          - { label: "URL", name: "url", widget: "image", default: "" }
          - { label: "Texto Alternativo (Alt)", name: "alt", widget: "string", default: "" }
          - { label: "Legenda", name: "caption", widget: "string", default: "", optional: true }
          - { label: "Largura", name: "width", widget: "number", default: 1000 }
          - { label: "Altura", name: "height", widget: "number", default: 600 }
      
      - label: "Vídeos"
        name: "videos"
        widget: "list"
        default: []
        optional: true
        collapsed: true
        fields:
          - { label: "URL", name: "url", widget: "string", default: "", hint: "Link do YouTube, Vimeo, etc." }
          - { label: "Tipo", name: "type", widget: "select", default: "youtube", options: ["youtube", "vimeo", "mp4"] }
          - { label: "Título", name: "title", widget: "string", default: "" }
          - { label: "Thumbnail", name: "thumbnail", widget: "image", default: "", optional: true }

      - label: "Anexos (Downloads)"
        name: "attachments"
        widget: "list"
        default: []
        optional: true
        collapsed: true
        fields:
          - { label: "Nome do Ficheiro", name: "name", widget: "string", default: "" }
          - { label: "Ficheiro", name: "url", widget: "file", default: "" }
          - { label: "Tipo", name: "type", widget: "select", default: "application/pdf", options: ["application/pdf", "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet", "text/csv", "application/vnd.openxmlformats-officedocument.wordprocessingml.document", "application/zip"] }
          - { label: "Tamanho", name: "size", widget: "string", default: "", optional: true, hint: "Ex: 1.8MB" }
      
      # --- CORPO DO ARTIGO ---
      - label: "Corpo do Artigo"
        name: "body"
        widget: "markdown"
        default: ""
        required: true
        hint: "Conteúdo principal do artigo. Use Markdown para formatação."
      
      # --- REFERÊNCIAS E CITAÇÕES ---
      - label: "Referências (Bibliografia)"
        name: "references"
        widget: "list"
        default: []
        optional: true
        collapsed: true
        fields:
          - { label: "Título", name: "title", widget: "string", default: "" }
          - { label: "Autores", name: "authors", widget: "list", default: [] }
          - { label: "Ano", name: "year", widget: "string", default: "" }
          - { label: "URL", name: "url", widget: "string", default: "" }
          - { label: "DOI", name: "doi", widget: "string", default: "", optional: true }

      - label: "Citações (destacadas)"
        name: "citations"
        widget: "list"
        default: []
        optional: true
        collapsed: true
        fields:
          - { label: "Texto", name: "text", widget: "text", default: "" }
          - { label: "Autor", name: "author", widget: "string", default: "" }
          - { label: "Fonte", name: "source", widget: "string", default: "" }

      # --- RELACIONAMENTOS ---
      - { label: "article Relacionados (IDs)", name: "related_articles", widget: "list", default: [], optional: true, hint: "Insira os IDs de outros article. Ex: 0023" }
      
      - label: "Série"
        name: "series"
        widget: "object"
        optional: true
        collapsed: true
        fields:
          - { label: "Título da Série", name: "title_series", widget: "string", default: "" }
          - { label: "Parte Nº", name: "part", widget: "number", default: 0 }
          - { label: "Total de Partes", name: "total_parts", widget: "number", default: 0 }
      
      # --- CAMPOS PERSONALIZADOS ---
      - label: "Campos Personalizados (Institucional)"
        name: "custom_fields"
        widget: "object"
        optional: true
        collapsed: true
        fields:
          - { label: "Projeto de Pesquisa", name: "research_project", widget: "string", default: "" }
          - { label: "Fonte de Financiamento", name: "funding_source", widget: "string", default: "" }
          - { label: "Instituição", name: "institution", widget: "string", default: "Departamento de Estatística - UnB" }
