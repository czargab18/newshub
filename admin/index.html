<!doctype html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Painel de Conteúdo - Decap CMS</title>
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  <!-- Preview Styles -->
  <style>
    /* Estilos para o preview não quebrar */
    .cms-preview-content {
      padding: 2rem;
      max-width: 800px;
      margin: 0 auto;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      line-height: 1.6;
      color: #333;
    }
  
    .cms-preview-content h1 {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      color: #1a1a1a;
    }
  
    .cms-preview-content h2 {
      font-size: 1.5rem;
      font-weight: 600;
      color: #555;
      margin-bottom: 1rem;
    }
  
    .cms-preview-content .metadata {
      color: #666;
      font-size: 0.9rem;
      margin-bottom: 1.5rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid #eee;
    }
  
    .cms-preview-content .excerpt {
      font-style: italic;
      color: #555;
      font-size: 1.1rem;
      margin-bottom: 1.5rem;
      padding-left: 1rem;
      border-left: 3px solid #0066cc;
    }
  
    .cms-preview-content img {
      max-width: 100%;
      height: auto;
      border-radius: 8px;
      margin: 1.5rem 0;
    }
  
    .cms-preview-content .body-content {
      font-size: 1rem;
      line-height: 1.8;
    }
  
    .cms-preview-content .body-content p {
      margin-bottom: 1rem;
    }
  
    .cms-preview-content .body-content h2,
    .cms-preview-content .body-content h3 {
      margin-top: 2rem;
      margin-bottom: 1rem;
    }
  
    .cms-preview-content .body-content ul,
    .cms-preview-content .body-content ol {
      margin-left: 1.5rem;
      margin-bottom: 1rem;
    }
  
    .cms-preview-content .body-content blockquote {
      border-left: 4px solid #0066cc;
      padding-left: 1rem;
      color: #555;
      font-style: italic;
      margin: 1.5rem 0;
    }
  
    .cms-preview-content .body-content code {
      background: #f4f4f4;
      padding: 0.2rem 0.4rem;
      border-radius: 3px;
      font-family: 'Courier New', monospace;
      font-size: 0.9em;
    }
  
    .cms-preview-content .body-content pre {
      background: #f4f4f4;
      padding: 1rem;
      border-radius: 5px;
      overflow-x: auto;
      margin: 1rem 0;
    }
  
    .cms-preview-content .body-content pre code {
      background: none;
      padding: 0;
    }
  </style>
</head>

<body>
  <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
  <!-- Custom Preview Template -->
  <script>
    // Registrar template de preview customizado
    CMS.registerPreviewTemplate('conteudo', createClass({
      render: function () {
        const entry = this.props.entry;
        const title = entry.getIn(['data', 'title']);
        const subtitle = entry.getIn(['data', 'subtitle']);
        const excerpt = entry.getIn(['data', 'excerpt']);
        const body = entry.getIn(['data', 'body']);
        const date = entry.getIn(['data', 'date_format']);
        const author = entry.getIn(['data', 'author']) || 'Departamento de Estatística';
        const coverImage = entry.getIn(['data', 'cover_image', 'url']);
        const coverAlt = entry.getIn(['data', 'cover_image', 'alt']);
        const type = entry.getIn(['data', 'type']);
        const category = entry.getIn(['data', 'category']);

        return h('div', { className: 'cms-preview-content' },
          h('h1', {}, title || 'Título do Artigo'),
          subtitle && h('h2', {}, subtitle),
          h('div', { className: 'metadata' },
            h('span', {}, (date ? new Date(date).toLocaleDateString('pt-BR', {
              year: 'numeric',
              month: 'long',
              day: 'numeric'
            }) : 'Data não definida') + ' • ' + author),
            type && h('span', { style: { marginLeft: '1rem', background: '#e3f2fd', padding: '0.2rem 0.5rem', borderRadius: '3px', fontSize: '0.85rem' } }, type.toUpperCase())
          ),
          coverImage && h('img', { src: coverImage, alt: coverAlt || 'Imagem de capa' }),
          excerpt && h('div', { className: 'excerpt' }, excerpt),
          h('div', {
            className: 'body-content',
            dangerouslySetInnerHTML: {
              __html: body ? this.props.widgetFor('body') : '<p>Conteúdo do artigo aparecerá aqui...</p>'
            }
          })
        );
      }
    }));

    // Aplicar estilos ao preview
    CMS.registerPreviewStyle('/admin/preview.css', { raw: false });
  </script>
</body>

</html>